<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Jo√£oflix</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: Arial, sans-serif; background-color: #000; color: #fff; overflow-x: hidden; overflow-y: auto; height: 100vh; }
body.light { background-color: #f5f5f5; color: #000; }
body.light header, body.light .sidebar, body.light .card-filme, body.light .modal-content { background: #fff; color: #000; }
body.light .card-filme p, body.light .info h4 { color: #222; }
body.light .sidebar button { color: #333; }
body.light .sidebar button:hover { background: #eee; color: #000; }
.intro { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: black; display: flex; justify-content: center; align-items: center; z-index: 9999; animation: fadeOut 2s ease 3s forwards; }
.intro h1 { font-size: 4em; color: #e50914; opacity: 0; animation: fadeIn 2s ease forwards; }
@keyframes fadeIn { to { opacity: 1; } }
@keyframes fadeOut { to { opacity: 0; visibility: hidden; } }

#login, #selecaoPerfis, #catalogo { display: none; }
#login { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; gap: 15px; background-image: url('https://i.postimg.cc/m21P1P9m/filmes-da-netflix-capa.jpg'); background-size: cover; background-position: center; backdrop-filter: brightness(0.6); }
#login input { background-color: rgba(0,0,0,0.8); color: white; border: 1px solid #555; border-radius: 4px; padding: 10px; width: 280px; font-size: 16px; box-shadow: 0 0 8px #000; }
#login button { background-color: #e50914; color: white; border: none; font-weight: bold; font-size: 16px; padding: 10px 20px; border-radius: 4px; cursor: pointer; box-shadow: 0 0 10px #e50914; transition: background 0.3s ease; }
#login button:hover { background-color: #b20710; }

#selecaoPerfis { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; gap: 40px; }
#selecaoPerfis h2 { font-size: 2.5rem; margin-bottom: 20px; }
.perfis { display: flex; gap: 30px; flex-wrap: wrap; justify-content: center; }
.perfil { display: flex; flex-direction: column; align-items: center; cursor: pointer; transition: transform 0.3s; width: 140px; }
.perfil img { width: 140px; height: 140px; border-radius: 10px; object-fit: cover; box-shadow: 0 0 10px #e50914; transition: transform 0.3s; }
.perfil:hover { transform: scale(1.05); }
.perfil span { margin-top: 12px; font-size: 1.2rem; font-weight: bold; color: white; text-align: center; }

header { position: fixed; top: 0; left: 220px; right: 0; height: 60px; background: #141414; display: flex; align-items: center; justify-content: space-between; padding: 0 30px; z-index: 20; border-bottom: 1px solid #222; }
header h1 { color: #e50914; font-size: 24px; font-weight: 900; }
#searchBar { background: #333; border: none; padding: 8px 12px; border-radius: 4px; width: 280px; color: white; font-size: 14px; }

.avatar-wrapper { position: relative; display: inline-block; }
.avatar-menu { display: none; position: absolute; right: 0; top: 60px; background: #222; border: 1px solid #444; border-radius: 6px; overflow: hidden; z-index: 999; min-width: 180px; }
.avatar-menu button { background: none; border: none; color: #fff; padding: 12px 16px; width: 100%; text-align: left; cursor: pointer; transition: background 0.2s; }
.avatar-menu button:hover { background: #444; }

.sidebar { position: fixed; top: 0; left: 0; height: 100vh; width: 220px; background: #111; padding: 20px 0; display: flex; flex-direction: column; align-items: center; overflow-y: auto; transition: width 0.3s ease; }
.sidebar.collapsed { width: 0; padding: 0; overflow: hidden; }
.sidebar h2 { color: #e50914; font-size: 28px; margin-bottom: 20px; }
.sidebar img { width: 120px; height: 120px; border-radius: 50%; margin-bottom: 20px; object-fit: cover; box-shadow: 0 0 15px #e50914; }
.sidebar button { background: none; border: none; color: #bbb; font-size: 16px; text-align: left; padding: 10px 30px; width: 100%; cursor: pointer; transition: .3s; }
.sidebar button:hover, .sidebar button.active { color: white; background: #333; }

.main { margin-left: 220px; padding: 80px 30px 30px; transition: margin-left 0.3s ease; }
.main.expanded { margin-left: 0; }

#destaque { width: 100%; height: 500px; margin-top: 60px; padding: 40px 30px; background-size: cover; background-position: center; background-repeat: no-repeat; position: relative; display: flex; align-items: flex-end; color: white; box-shadow: inset 0 -80px 150px rgba(0,0,0,0.7); transition: background-image 0.5s ease; }
#destaque .conteudo-destaque { max-width: 600px; z-index: 2; }
#destaque h2 { font-size: 3rem; margin-bottom: 10px; }
#destaque p { font-size: 1.2rem; margin-bottom: 20px; }
#destaque button { background-color: #e50914; border: none; padding: 10px 20px; font-size: 1rem; color: white; border-radius: 4px; cursor: pointer; box-shadow: 0 0 10px #e50914; transition: background 0.3s ease; }
#destaque button:hover { background-color: #b20710; }
#destaque .seta { position: absolute; top: 50%; transform: translateY(-50%); font-size: 3rem; cursor: pointer; color: white; user-select: none; }
#destaque .seta-esq { left: 20px; }
#destaque .seta-dir { right: 20px; }

.categoria { margin-bottom: 40px; }
.categoria h3 { margin-bottom: 10px; font-size: 1.6rem; padding-left: 10px; }
.scroll-horizontal { display: flex; overflow-x: auto; gap: 15px; padding-left: 10px; scroll-behavior: smooth; }
.scroll-horizontal::-webkit-scrollbar { height: 8px; }
.scroll-horizontal::-webkit-scrollbar-thumb { background: #555; border-radius: 10px; }

.card-filme { flex: 0 0 auto; width: 160px; background: #222; border-radius: 8px; display: flex; flex-direction: column; overflow: hidden; box-shadow: 0 0 10px #0008; cursor: pointer; transition: transform 0.3s; }
.card-filme:hover { transform: scale(1.07); box-shadow: 0 0 15px #e50914; }
.card-filme img { width: 100%; height: 240px; object-fit: cover; }
.card-filme .info { padding: 10px; font-size: 13px; flex: 1; display: flex; flex-direction: column; justify-content: space-between; }
.card-filme .info h4 { font-size: 15px; margin-bottom: 6px; }
.card-filme .info p { font-size: 12px; color: #ccc; display: -webkit-box; -webkit-line-clamp: 4; -webkit-box-orient: vertical; overflow: hidden; }
.btn-trailer { margin-top: 6px; background-color: #e50914; border: none; color: white; padding: 6px 12px; font-size: 13px; border-radius: 4px; cursor: pointer; }

.modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); display: none; align-items: center; justify-content: center; z-index: 99999; }
.modal-content { position: relative; width: 90%; max-width: 900px; background: #000; padding: 20px; border-radius: 8px; }
.modal-content iframe { width: 100%; height: 480px; border: none; border-radius: 8px; }
.modal-content .close { position: absolute; top: 10px; right: 15px; background: #e50914; border: none; color: white; font-size: 24px; padding: 6px 12px; cursor: pointer; border-radius: 6px; }

#configModal select, #configModal button { margin-top: 10px; background: #e50914; border: none; color: white; padding: 8px 12px; border-radius: 4px; font-size: 14px; cursor: pointer; }
#configModal button:hover { background: #c40812; }

.toggle-sidebar { position: fixed; top: 15px; left: 10px; z-index: 30; background: #e50914; border: none; color: white; font-size: 26px; padding: 6px 12px; border-radius: 6px; cursor: pointer; box-shadow: 0 0 10px #e50914; transition: background 0.3s ease; }
.toggle-sidebar:hover { background: #b20710; }
</style>
</head>
<body>
<div class="intro"><h1>JO√ÉOFLIX</h1></div>

<div id="login">
  <input type="email" placeholder="Email" id="email" />
  <input type="password" placeholder="Senha" id="senha" />
  <button onclick="fazerLogin()">Entrar</button>
</div>

<div id="selecaoPerfis">
  <h2>Quem est√° assistindo?</h2>
  <div class="perfis" id="listaPerfis"></div>
</div>

<div id="catalogo">
  <button class="toggle-sidebar" onclick="toggleSidebar()">‚ò∞</button>
  <header>
    <h1>Jo√£oflix</h1>
    <input type="text" id="searchBar" placeholder="Buscar t√≠tulo..." oninput="filtrarFilmes()" />
    <div class="avatar-wrapper">
      <img id="avatarSidebar" src="" alt="Avatar" style="width:50px; height:50px; border-radius:50%; box-shadow: 0 0 8px #e50914; cursor:pointer;" onclick="toggleAvatarMenu()" />
      <div class="avatar-menu" id="avatarMenu">
        <button onclick="mostrarSelecaoPerfis()">üë• Trocar de Perfil</button>
        <button onclick="abrirConfiguracoes()">‚öôÔ∏è Configura√ß√µes</button>
        <button onclick="sair()">üö™ Sair</button>
      </div>
    </div>
  </header>
  <div class="sidebar" id="sidebar"><h2>Categorias</h2></div>
  <div class="main" id="main">
    <div id="destaque">
      <span class="seta seta-esq" onclick="mudarDestaque(-1)">&#10094;</span>
      <span class="seta seta-dir" onclick="mudarDestaque(1)">&#10095;</span>
      <div class="conteudo-destaque">
        <h2 id="destaque-titulo">Carregando...</h2>
        <p id="destaque-descricao">Aguarde</p>
        <button onclick="mostrarTrailerDestaque()">‚ñ∂ Assistir Trailer</button>
      </div>
    </div>
  </div>
</div>

<div class="modal" id="modal">
  <div class="modal-content">
    <button class="close" onclick="fecharModal()">√ó</button>
    <div id="modal-body"></div>
  </div>
</div>

<div class="modal" id="configModal">
  <div class="modal-content">
    <button class="close" onclick="fecharConfig()">√ó</button>
    <h2 style="color:white; margin-bottom: 15px;">Configura√ß√µes</h2>
    <div style="margin-bottom: 20px;">
      <label style="color:white;">üåó Tema:</label><br>
      <button onclick="mudarTema('dark')">Escuro</button>
      <button onclick="mudarTema('light')">Claro</button>
    </div>
    <div>
      <label style="color:white;">üåç Idioma:</label><br>
      <select id="idiomaSelect" onchange="mudarIdioma()">
        <option value="pt-BR">Portugu√™s</option>
        <option value="en-US">English</option>
        <option value="es-ES">Espa√±ol</option>
      </select>
    </div>
  </div>
</div>

<script>
const API_KEY = "65e7972a036cf9f4506c1f837a38a9ae";
const IMG_BASE = "https://image.tmdb.org/t/p/w500";
let perfilAtivo = null;
let categorias = [];
let filmesPorCategoria = {};
let idiomaAtual = localStorage.getItem("idioma") || "pt-BR";
let indiceDestaque = 0;
let destaqueInterval = null;

let perfis = {
  mirian:"https://i.postimg.cc/KvC37NYk/IMG20250801105332.jpg",
  sonia: "https://i.postimg.cc/SKy5gcTq/IMG20250801105254.jpg",
  requena: "https://i.postimg.cc/zXC88MgS/image.png",
  victoria: "https://i.postimg.cc/R0ZB8c98/victoria.jpg",
  isabela: "https://i.postimg.cc/Rq5C5jhZ/isabela.jpg",
  beatriz: "https://i.postimg.cc/2jGHK4qn/beatriz.jpg",
  pedro: "https://i.postimg.cc/xjxwbyT6/pedro.jpg",
  joao: "https://i.postimg.cc/wM6VRmRX/jo-o.jpg",
  kaylan: "https://i.postimg.cc/0yVR9jCF/kaylan.jpg",
  junior: "https://i.postimg.cc/YqxCrw8J/junior.jpg"
};

function mostrarPerfis() { 
  const lista = document.getElementById("listaPerfis"); 
  lista.innerHTML = "";
  for(let nome in perfis){
    const div = document.createElement("div");
    div.classList.add("perfil");
    div.innerHTML = `<img src="${perfis[nome]}" /><span>${nome}</span>`;
    div.onclick = () => selecionarPerfil(nome);
    lista.appendChild(div);
  }
}

function selecionarPerfil(nome){
  perfilAtivo = nome;
  document.getElementById("avatarSidebar").src = perfis[nome];
  document.getElementById("login").style.display = "none";
  document.getElementById("selecaoPerfis").style.display = "none";
  document.getElementById("catalogo").style.display = "block";
  carregarCategorias();
  iniciarDestaque();
}

function fazerLogin(){ 
  const email = document.getElementById("email").value; 
  const senha = document.getElementById("senha").value; 
  if(email && senha){ mostrarPerfis(); document.getElementById("login").style.display = "none"; document.getElementById("selecaoPerfis").style.display = "flex"; }
}

function toggleSidebar(){
  document.getElementById("sidebar").classList.toggle("collapsed");
  document.getElementById("main").classList.toggle("expanded");
}

function toggleAvatarMenu(){
  document.getElementById("avatarMenu").style.display = document.getElementById("avatarMenu").style.display==="block"?"none":"block";
}

function mostrarSelecaoPerfis(){
  document.getElementById("catalogo").style.display = "none";
  document.getElementById("selecaoPerfis").style.display = "flex";
}

function abrirConfiguracoes(){ document.getElementById("configModal").style.display="flex"; }
function fecharConfig(){ document.getElementById("configModal").style.display="none"; }

function mudarTema(t){ document.body.className = t; }

function mudarIdioma(){ idiomaAtual = document.getElementById("idiomaSelect").value; localStorage.setItem("idioma", idiomaAtual); carregarCategorias(); }

async function carregarCategorias(){
  categorias = [
    {id: 28, nome: "A√ß√£o"}, {id: 35, nome: "Com√©dia"}, {id: 18, nome: "Drama"},
    {id: 10749, nome: "Romance"}, {id: 27, nome: "Terror"}, {id: 16, nome: "Anima√ß√£o"},
    {id: 878, nome: "Fic√ß√£o Cient√≠fica"}, {id: 99, nome: "Document√°rio"}, {id: 12, nome: "Aventura"},
    {id: 14, nome: "Fantasia"}, {id: 80, nome: "Crime"}, {id: 36, nome: "Hist√≥ria"},
    {id: 10751, nome: "Fam√≠lia"}, {id: 10402, nome: "M√∫sica"}, {id: 10770, nome: "Cinema TV"},
    {id: 53, nome: "Suspense"}, {id: 10752, nome: "Guerra"}, {id: 37, nome: "Faroeste"},
    {id: 10759, nome: "Action & Adventure"}, {id: 10762, nome: "Kids"}, {id: 10763, nome: "News"},
    {id: 10764, nome: "Reality"}, {id: 10765, nome: "Sci-Fi & Fantasy"}
  ];

  const sidebar = document.getElementById("sidebar");
  sidebar.innerHTML = "<h2>Categorias</h2>";
  categorias.forEach(cat => {
    const btn = document.createElement("button");
    btn.textContent = cat.nome;
    btn.onclick = () => filtrarPorCategoria(cat.id);
    sidebar.appendChild(btn);
  });

  const main = document.getElementById("main");
  main.innerHTML = `<div id="destaque">
      <span class="seta seta-esq" onclick="mudarDestaque(-1)">&#10094;</span>
      <span class="seta seta-dir" onclick="mudarDestaque(1)">&#10095;</span>
      <div class="conteudo-destaque">
        <h2 id="destaque-titulo">Carregando...</h2>
        <p id="destaque-descricao">Aguarde</p>
        <button onclick="mostrarTrailerDestaque()">‚ñ∂ Assistir Trailer</button>
      </div>
    </div>`;

  for(const cat of categorias){
    await carregarFilmes(cat.id, cat.nome);
  }

  mostrarDestaque(0);
}

async function carregarFilmes(id,nome){
  const res = await fetch(`https://api.themoviedb.org/3/discover/movie?api_key=${API_KEY}&language=${idiomaAtual}&with_genres=${id}`);
  const data = await res.json();
  filmesPorCategoria[id] = data.results;

  const main = document.getElementById("main");
  const divCat = document.createElement("div");
  divCat.classList.add("categoria");
  divCat.id = `categoria-${id}`;
  divCat.innerHTML = `<h3>${nome}</h3><div class="scroll-horizontal"></div>`;
  main.appendChild(divCat);

  const scrollDiv = divCat.querySelector(".scroll-horizontal");
  data.results.forEach(f => {
    const card = document.createElement("div");
    card.classList.add("card-filme");
    card.innerHTML = `
      <img src="${IMG_BASE+f.poster_path}" alt="${f.title}">
      <div class="info">
        <h4>${f.title}</h4>
        <p>${f.overview}</p>
        <button class="btn-trailer" onclick="abrirTrailer('${f.id}')">‚ñ∂ Trailer</button>
      </div>`;
    scrollDiv.appendChild(card);
  });
}

function filtrarPorCategoria(id){
  document.querySelectorAll(".categoria").forEach(c => c.style.display="none");
  document.getElementById(`categoria-${id}`).style.display="block";
}

async function abrirTrailer(id){
  const res = await fetch(`https://api.themoviedb.org/3/movie/${id}/videos?api_key=${API_KEY}&language=${idiomaAtual}`);
  const data = await res.json();
  const trailer = data.results.find(v => v.type==="Trailer") || data.results[0];
  if(trailer){
    document.getElementById("modal-body").innerHTML = `<iframe src="https://www.youtube.com/embed/${trailer.key}" allowfullscreen></iframe>`;
    document.getElementById("modal").style.display="flex";
  }else alert("Trailer n√£o dispon√≠vel");
}

function fecharModal(){ document.getElementById("modal").style.display="none"; document.getElementById("modal-body").innerHTML=""; }

function mostrarDestaque(i){
  const todasCategorias = Object.values(filmesPorCategoria).flat();
  if(todasCategorias.length===0) return;
  indiceDestaque = (i + todasCategorias.length) % todasCategorias.length;
  const f = todasCategorias[indiceDestaque];
  document.getElementById("destaque").style.backgroundImage = `url(${IMG_BASE+f.backdrop_path})`;
  document.getElementById("destaque-titulo").textContent = f.title;
  document.getElementById("destaque-descricao").textContent = f.overview;
}

function mudarDestaque(delta){ mostrarDestaque(indiceDestaque+delta); }

function iniciarDestaque(){
  if(destaqueInterval) clearInterval(destaqueInterval);
  destaqueInterval = setInterval(()=>mudarDestaque(1),6000);
}

function filtrarFilmes(){
  const termo = document.getElementById("searchBar").value.toLowerCase();
  document.getElementById("destaque").style.display = termo? "none":"flex";
  document.querySelectorAll(".card-filme").forEach(c=>{
    c.style.display = c.querySelector("h4").textContent.toLowerCase().includes(termo)? "flex":"none";
  });
}

function sair(){ location.reload(); }

window.onload = ()=>setTimeout(()=>document.querySelector(".intro").style.display="none", 5000);
</script>
</body>
</html>
